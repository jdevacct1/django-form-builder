{% extends 'formbuilder/base.html' %}
{% load static %}

{% block title %}{{ form.name }} - Django Form Builder{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/form_detail.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="breadcrumb">
        <a href="{% url 'forms_list' %}">Forms List</a> / {{ form.name }}
    </div>

    <div class="header">
        <h1>{{ form.name }}</h1>
        <p>Form created on {{ form.created|date:"F d, Y \a\t H:i" }}</p>
        <div class="header-meta">
            <div>
                <strong>Last Updated:</strong> {{ form.modified|date:"F d, Y \a\t H:i" }}
            </div>
            <span class="status-badge {% if form.is_active %}status-active{% else %}status-inactive{% endif %}">
                {% if form.is_active %}Active{% else %}Inactive{% endif %}
            </span>
        </div>
    </div>

    <div class="actions">
        <a href="{% url 'form_view' form.pk %}" class="btn">View Form</a>
        <a href="{% url 'form_builder_with_id' form.pk %}" class="btn">Edit Form</a>
        <a href="{% url 'forms_list' %}" class="btn btn-secondary">Back to List</a>
        <a href="{% url 'form_builder' %}" class="btn btn-success">Create New Form</a>
    </div>

    <div class="content-grid">
        <div class="card">
            <div class="card-header">
                <h2>Form Statistics</h2>
            </div>
            <div class="card-body">
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">{{ component_count }}</div>
                        <div class="stat-label">Components</div>
                    </div>
                </div>

                {% if component_types %}
                    <div class="component-types">
                        <h3>Component Types Used:</h3>
                        <div class="component-tags">
                            {% for type in component_types %}
                                <span class="component-tag">{{ type }}</span>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2>Form Schema</h2>
            </div>
            <div class="card-body">
                <div class="schema-preview">
                    <pre>{{ form.schema|pprint }}</pre>
                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}